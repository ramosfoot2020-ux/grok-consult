model MeetingNote {
  id                    String                          @id @default(uuid())
  startDate             DateTime
  endDate               DateTime
  duration              Int
  name                  String
  // Link to the User who created the note
  authorId              String
  author                User                            @relation(fields: [authorId], references: [id])
  // Link to the Company the note belongs to
  companyId             String
  company               Company                         @relation(fields: [companyId], references: [id])
  // Link to recurring series (optional)
  recurringMeetingId    String?                         
  recurringMeeting      RecurringMeeting?              @relation(fields: [recurringMeetingId], references: [id])
  // tip-tap blocs [{source:"editor" | 'custom",body:Json? , type:BlocksTypes}]
  additionalBlocks      Json                            @default("[]")
  additionalBlocksAfter Json                            @default("[]")
  // Stores the raw AI summary JSON
  globalSummaryJson     Json?
  // attendees
  participantsOutSystem ExternalParticipantsInMeeting[]
  participantsInSystem  ParticipantsInMeeting[]
  type                  MeetingTypes
  area                  MeetingArea?
  // managble tag - label for the meeting note in the company scope
  labels                LabelsOnMeetingNotes[]
  createdAt             DateTime                        @default(now())
  updatedAt             DateTime                        @updatedAt
  location              String?
  // isHidden field is used to hide from list items.
  isHidden              Boolean                         @default(false)
  // interactionStatus  field is used to track if the note was generated by AI or manually reviewed by user or imported from google.
  interactionStatus     MeetingInteractionStatus        @default(PENDING)
  // Link to the join table
  assets                MeetingAssetsOnMeetingNotes[]
  // Shared with other in system users
  shares                MeetingNoteShare[]
  //public Access
  publicSlug            String?                         @unique
  publicUntil           DateTime?
  
  comments              MeetingComment[]
}

enum MeetingTypes {
  DAILY
  KICKOFF
  DEMO
  REQUIREMENTS_GATHERING
}

enum MeetingStatus {
  SCHEDULED
  COMPLETED
  CANCELED
  RESCHEDULED
}

enum MeetingInteractionStatus {
  PENDING // Initial state, untouched
  AI_GENERATED // User generated AI content
  MANUALLY_REVIEWED // User opened and saved the note
  IMPORTED_GOOGLE // Imported from Google Calendar
}

enum BlocksTypes {
  MEETING_TYPE_SELECT
  AGENDA_BLOCK
  AGENDA_LIST
  AGENDA_ITEM
  ATTENDEES_BLOCK
  ATTENDEES_LIST
  ATTENDEES_ITEM
  MEETING_DETAILS_BLOCK
  MEETING_TIME
  MEETING_DURATION
  MEETING_LOCATION
  MEETING_DATE
  MEETING_TITLE
  MEETING_PREREQUISITES
  // tip-tap native block
  HEADING
  PARAGRAPH
  TASK_LIST
  BULLET_LIST
  ORDERED_LIST
  HORIZONTAL_RULE
}

enum AttendanceStatus {
  PRESENT
  ABSENT
}

enum MeetingArea {
  SOFTWARE_DEVELOPMENT
}
